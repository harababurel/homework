YUI.add("tray-align-plugin",function(a){function b(a){this._host=a.host,this._host.after("open",this._afterTrayOpen,this),this._host.after("close",this._afterTrayClose,this)}var c="offsetWidth",d="offsetHeight",e="display",f="width";b.prototype={sync:function(){var a,b,g,h,i,j,k=this._host,l=k.get("assist").get("searchbox"),m=k.get("node");m.setStyle(e,"none"),a=l.getXY(),h=l.get(c),i=l.get(d),m.setStyle(e,""),a!==!1&&(b=a[0],g=a[1]+i,m.setXY([b,g])),m.setStyle(f,h+"px"),j=m.get(c)-h,m.setStyle(f,h-j+"px")},destroy:function(){this._resizeHandle&&this._resizeHandle.detach()},_afterTrayOpen:function(){this.sync(),this._resizeHandle=a.on("resize",this._onresize,window,this)},_afterTrayClose:function(){this._resizeHandle.detach(),this._resizeHandle=null},_onresize:function(){var b=a.DOM.winWidth(),c=a.DOM.winHeight();this._w===b&&this._h===c||(this._w=b,this._h=c,this._timer&&this._timer.cancel(),this._timer=a.later(50,this,this.sync))}},b.NAME="tray-align-plugin",b.NS="align",a.Search.Assist.TrayAlignPlugin=b},"1.0.0",{requires:["searchassist-core","node-screen"]});YUI.add("tray-shim-plugin",function(a){function b(b){this._host=b.host,this._host.after("open",this._afterTrayOpen,this),this._host.after("close",this._afterTrayClose,this);var c=this._host.get("node");this._shim=a.Node.create('<iframe class="sa-shim" frameborder="0" tabindex="-1" role="presentation"></iframe>',c.get("ownerDocument")),0===window.location.href.toLowerCase().indexOf("https")&&this._shim.set("src",["javascript",":","false;"].join("")),a.UA.ie?this._shim.setStyle("filter","alpha(opacity=0)"):this._shim.setStyle("opacity","0"),this._shim.setStyles({position:"absolute",border:"none",margin:"0",padding:"0",display:"none"}),c.insertBefore(this._shim,c.get("firstChild"))}b.prototype={sync:function(){var a=this._host.get("node");this._shim.setAttrs({width:a.getStyle("width"),height:a.getStyle("height")})},destroy:function(){this._shim.remove(!0),this._resizeHandle&&this._resizeHandle.detach()},_afterTrayOpen:function(){this._shim.setStyle("display","block"),this.sync(),this._resizeHandle=a.on("resize",this._onresize,window,this)},_afterTrayClose:function(){this._shim.setStyle("display","none"),this._resizeHandle.detach(),this._resizeHandle=null},_onresize:function(){var b=a.DOM.winWidth(),c=a.DOM.winHeight();this._w===b&&this._h===c||(this._w=b,this._h=c,this._timer&&this._timer.cancel(),this._timer=a.later(50,this,this.sync))}},b.NAME="tray-shim-plugin",b.NS="shim",a.Search.Assist.TrayShimPlugin=b},"1.0.0",{requires:["searchassist-core"]});"undefined"==typeof YAHOO&&(YAHOO={}),"undefined"==typeof YAHOO.util&&(YAHOO.util={}),"undefined"==typeof YAHOO.util.UHScriptNodeDataSource&&(YAHOO.util.UHScriptNodeDataSource={}),"undefined"==typeof YAHOO.Media&&(YAHOO.Media={}),YUI.add("ult-linktrack",function(a){function b(a){var b,c,d,e,f,g,h,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._-",j="",k=a.length,l=0;do b=a.charCodeAt(l++),c=a.charCodeAt(l++),d=a.charCodeAt(l++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),j+=i.charAt(e)+i.charAt(f)+i.charAt(g)+i.charAt(h);while(l<k);return j}function c(a){for(var b=0,c=a.length;b<c;b++)if(a.charCodeAt(b)<32)return!0;return!1}var d=a.namespace("Search");d.ULT||(d.ULT={}),a.mix(d.ULT,{BEACON_URL:"http://rds.yahoo.com/b.gif",SRC_SPACEID_KEY:"_S",beacon:function(a){var b=d.ULT.track_click(d.ULT.BEACON_URL,a)+"?t="+Math.random();(new Image).src=b},track_click:function(d,e){var f,g,h="",i="",j="_r",k=[],l=[];return a.Lang.isObject(e)?(e[j]=2,f=0,a.each(e,function(b,d){if(!a.Lang.isString(b))try{b=b.toString()}catch(a){return}return d.length<1||d.length>8||d.indexOf(" ")!==-1||c(d)||c(b)?void(k=[]):void(k[f++]=d)}),k.length?(k=k.sort(),f=0,a.each(k,function(a){var b=e[a];l[f++]=a+h+b}),g=l.join(i),g.length<1||g.length>1024?d:(g=";_ylc="+b(g),f=d.indexOf("/*"),f===-1&&(f=d.indexOf("/?"),f!==-1&&f++),f===-1&&(f=d.indexOf("?")),f===-1?d+g:d.substr(0,f)+g+d.substr(f))):d):d}})},"1.0.0"),YUI.add("highlighter",function(a){function b(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}function c(a){return a.replace(/([\\\^\$*+\[\]?{}.=!:(|)])/g,"\\$1")}function d(a,b){var c=g.unique((b?a:a.toLowerCase()).split(/\s+/));return g.reject(c,function(a){return""===a})}function e(a){var b,c,d,e="";for(b=0,c=a.length;b<c;b++)d=a.charAt(b),e+=ACCENT_FOLDING_MAP_LATIN1[d]||d;return e}function f(a,d,f){var g,h,i,j,k,l,m,n,o;for(f||(f={}),a=b(a),g=e(a),d=d.concat(),h=0,i=d.length;h<i;++h)d[h]=e(c(b(d[h])));for(j=f.startMatch?"^(%needles)":f.subwordMatch?"(%needles)":"\\b(%needles)\\b",k=g.replace(new RegExp(j.replace("%needles",d.join("|")),f.caseSensitive?"g":"gi"),"<$1>"),l="",m=0,h=0,i=k.length;h<i;h++)n=a.charAt(m),o=k.charAt(h),"<"===o?l+='<b class="yui3-highlighter">':">"===o?l+="</b>":(m+=1,l+=n);return l}var g=a.Array,h="a",i="c",j="e",k="i",l="n",m="o",n="u",o="y";ACCENT_FOLDING_MAP_LATIN1={"À":h,"Á":h,"Â":h,"Ã":h,"Ä":h,"Å":h,"à":h,"á":h,"â":h,"ã":h,"ä":h,"å":h,"Ç":i,"ç":i,"È":j,"É":j,"Ê":j,"Ë":j,"è":j,"é":j,"ê":j,"ë":j,"Ì":k,"Í":k,"Î":k,"Ï":k,"ì":k,"í":k,"î":k,"ï":k,"Ñ":l,"ñ":l,"Ò":m,"Ó":m,"Ô":m,"Õ":m,"Ö":m,"Ø":m,"ò":m,"ó":m,"ô":m,"õ":m,"ö":m,"ø":m,"Ù":n,"Ú":n,"Û":n,"Ü":n,"ù":n,"ú":n,"û":n,"ü":n,"Ý":o,"ý":o,"ÿ":o},a.namespace("Search").Highlighter={phraseMatch:function(a,b,c){return f(b,[a],{caseSensitive:c})},startMatch:function(a,b,c){return f(b,[a],{caseSensitive:c,startMatch:!0})},wordMatch:function(a,b,c){var e=d(a,!0);return f(b,e,{caseSensitive:c})},subwordMatch:function(a,b,c){var e=d(a,!0);return f(b,e,{caseSensitive:c,subwordMatch:!0})}}},"@VERSION@",{requires:["array-extras"]}),YUI.add("searchassist-core",function(a){function b(){b.superclass.constructor.apply(this,arguments)}function c(){c.superclass.constructor.apply(this,arguments)}function d(){d.superclass.constructor.apply(this,arguments)}function e(){e.superclass.constructor.apply(this,arguments)}var f=a.namespace("Search"),g="searchassist",h="node",i="enabled",j="state",k="tray",l="searchbox",m="assist",n="delegate",o="hasFocus",p="descendants",q="activeIndex",r="tabIndex",s=!0,t=!1,u=0,v=1,w=0,x=1,y="suggest",z="request",A="response",B="open",C="close",D="show",E="hide",F="refresh",G="keynav",H="sa-item",I="sa-tray",J="sa-panel",K="sa-active",L="Bgc(#c6d7ff)",M="Bgc\\(#c6d7ff\\)",N="D(n)",O="D\\(n\\)",P="sa-panel-desc",Q="Env.Search.Assist.DataSource.callbacks",R=YUI.namespace(Q);a.AssistBase=function(){a.Base.apply(this,arguments)},a.AssistBase.NAME="AssistBase",a.AssistBase.ATTRS=a.Base.ATTRS,a.extend(a.AssistBase,a.Base,{_processInitOnlyAttrs:function(){for(var b=this.constructor,c=a.bind(function(a,b){a.initOnly&&this.modifyAttr(b,{readOnly:s})},this);b;)b.ATTRS&&a.each(b.ATTRS,c),b=b.superclass?b.superclass.constructor:null},_defInitFn:function(){a.Base.prototype._defInitFn.apply(this,arguments),this._processInitOnlyAttrs()}}),a.mix(b,{NAME:g,ATTRS:{searchbox:{initOnly:s,setter:function(b){return a.one(b)}},minLength:{value:3},autoSuggest:{value:s},enabled:{value:s}}}),a.extend(b,a.AssistBase,{initializer:function(a){this._query=f.Assist.Util.packString(a.originalQuery||""),this._timer=null,this.publish(y);var b=this.get(l);b.setAttribute("autocomplete","off"),b.on("keydown",this._keyDown,this)},getQuery:function(){return this._query},_keyDown:function(b){if(this.get("autoSuggest")){var c=b.keyCode,d=!1;c<46&&8!==c&&32!==c||(this._timer&&this._timer.cancel(),this._set(i,s),(229===c||197===c&&a.UA.opera)&&(d=!0),this._timer=a.later(50,this,this._checkValue,null,d))}},_checkValue:function(){if(this.get(i)){var b=f.Assist.Util.packString(this.get(l).get("value")),c=(a.one("#yucs-meta"),this.get("minLength"));b!==this._query&&(b.length>=c||this._query.length>=c)&&(this._query=b,this.fire(y,{query:b}))}}}),a.mix(c,{NAME:g+"-datasource",_cache:{},_tId:0,ATTRS:{generateRequestURI:{},callbackParam:{},globalCallback:{}}}),a.extend(c,a.AssistBase,{initializer:function(b){this.publish(z,{defaultFn:a.bind("_defRequestFn",this)}),this.publish(A,{defaultFn:a.bind("_defResponseFn",this)}),a.each(b.initialCacheData||{},a.bind(function(a,b){var d=this.get("generateRequestURI")(this,b);c._cache[d]=a},this))},request:function(a,b,c){this.fire(z,{query:a,callback:b,params:c})},_defRequestFn:function(b){function d(a,b,c){return a+(a.indexOf("?")===-1?"?":"&")+encodeURIComponent(b)+"="+encodeURIComponent(c)}var e,f,g,h,i,j,k=this,l=b.query,m=this.get("generateRequestURI")(this,l),n=m,o=c._cache[n];if(o)return void this.fire(A,a.mix({uri:m,data:o},b));for(e=this.get("callbackParam"),f=this.get("globalCallback"),e?(g=c._tId++,R[g]=a.bind(function(c){this.fire(A,a.mix({uri:n,data:c},b)),delete R[g]},this),m=d(m,e,"YUI."+Q+"["+g+"]")):f&&(window[f]=function(c){k.fire(A,a.mix({uri:n,data:c},b))}),j="",i=16+Math.floor(16*Math.random()),h=0;h<i;h++)j+=Math.floor(10*Math.random());m=d(m,"rnd",j),a.each(b.params||{},function(a,b){m=d(m,b,a)}),a.Get.script(m,{onEnd:function(a){a.purge()}})},_defResponseFn:function(a){var b=a.callback;b&&b(a),a.data&&!a.data.cached&&(c._cache[a.uri]=a.data,a.data.cached=s)}}),a.mix(d,{NAME:g+"-tray",OPEN:u,CLOSED:v,ATTRS:{node:{initOnly:s,setter:function(b){return a.one(b)}},state:{initOnly:s,value:v},assist:{initOnly:s}}}),a.extend(d,a.AssistBase,{initializer:function(){this.publish(B,{defaultFn:a.bind("_defOpenFn",this)}),this.publish(C,{defaultFn:a.bind("_defCloseFn",this)});var b=this.get(h);b||(b=a.Node.create("<div></div>"),a.one("body").append(b),this._set(h,b)),b.addClass(I),this.isClosed()&&b.addClass(N),a.UA.ie&&(b.addClass("ie"+a.UA.ie),"BackCompat"===document.compatMode&&b.addClass("quirksmode"))},open:function(a){this.isClosed()&&(this._set(j,u),this.fire(B,{auto:!!a}))},close:function(){this.isOpen()&&(this._set(j,v),this.fire(C))},toggle:function(){this.isClosed()?this.open():this.close()},isOpen:function(){return this.get(j)!==v},isClosed:function(){return this.get(j)!==u},_defOpenFn:function(){this.get(h).removeClass(O)},_defCloseFn:function(){this.get(h).addClass(N)}}),a.mix(e,{NAME:g+"-traypanel",VISIBLE:w,HIDDEN:x,ATTRS:{tray:{initOnly:s},node:{initOnly:s,setter:function(b){return a.one(b)}},state:{initOnly:s,value:x},delegate:{initOnly:s,value:t},hasFocus:{readOnly:s,value:t},descendants:{value:"."+H+" a",getter:function(a){return this.get(h).all(a)}},activeIndex:{readOnly:s,value:-1},descText:{}}}),a.extend(e,a.AssistBase,{initializer:function(){this.publish(D,{defaultFn:a.bind("_defShowFn",this)}),this.publish(E,{defaultFn:a.bind("_defHideFn",this)}),this.publish(F,{defaultFn:a.bind("_defRefreshFn",this)}),this.publish(G,{defaultFn:a.bind("_defKeyNavFn",this)});var b,c=this.get(k),d=this.get(k).get(m),e=this.get(n),f=this.get(h),g=this.get("descText");f||(f=a.Node.create("<div></div>"),c.get(h).append(f),this._set(h,f)),f.addClass(J),this.isHidden()&&f.addClass(N),g&&f.append(a.Node.create('<p class="'+P+' Hidden">'+g+"</p>")),b=e?d.get(l):f,b.on("keydown",this._handleKeyDown,this),c.on(B,this._handleTrayOpen,this),e||(f.on("focus",function(){this._set(o,s)},this),f.on("blur",function(){this._set(o,t)},this)),this.after(p+"Change",this._initDescendants,this)},show:function(){this.isHidden()&&(this._set(j,w),this.fire(D))},hide:function(){this.isVisible()&&(this._set(j,x),this.fire(E))},toggle:function(){this.isHidden()?this.show():this.hide()},isVisible:function(){return this.get(j)!==x},isHidden:function(){return this.get(j)!==w},focus:function(){var a=this.get(p).item(this.get(q));if(this.get(n))this._set(o,s),a&&this.activate(a);else if(a)try{a.focus()}catch(a){}},activate:function(a){a.addClass(K),a.ancestor("li").addClass(L)},deactivate:function(a){a.removeClass(K),a.ancestor("li").removeClass(M)},blur:function(){var a=this.get(p).item(this.get(q));this.get(n)&&(this._set(o,t),a&&a.removeClass(K))},refresh:function(a,b,c){this.blur(),this.fire(F,{query:a,data:b,altText:c})},hasFocusableDescendants:function(){return this.get(p).size()>0},_handleKeyDown:function(a){if(this.get(o)&&!(a.altKey||a.ctrlKey||a.metaKey||a.shiftKey))switch(a.keyCode){case 27:case 37:case 38:case 39:case 40:a.halt(),this.fire(G,a)}},_handleTrayOpen:function(){this._initDescendants()},_initDescendants:function(){var b=this.get(n),c=this.get(o);this._set(q,0),this.get(p).each(a.bind(function(a,d){0===d?(a.set(r,b?-1:0),c&&this.activate(a)):(a.set(r,-1),this.deactivate(a))},this))},_defShowFn:function(){this._initDescendants(),this.get(h).removeClass(O)},_defHideFn:function(){this.get(h).addClass(N),this.blur()},_defKeyNavFn:function(a){var b,c=this.get(p),d=this.get(q),e=this.get(n),f=c.item(d);switch(a.keyCode){case 38:d>0&&d--;break;case 40:d<c.size()-1&&d++}if(d!==this.get(q)&&(b=c.item(d),this.deactivate(f),this.activate(b),this._set(q,d),!e&&(f.set(r,-1),b.set(r,0),this.get(o))))try{b.focus()}catch(a){}},_defRefreshFn:function(a){}}),f.Assist=b,f.Assist.DataSource=c,f.Assist.Tray=d,f.Assist.TrayPanel=e,f.Assist.Util={packString:function(a){return a.replace(/^\s*/,"").replace(/\s+/g," ")},getFormField:function(a,b){var c,d=a.all("input");return d.each(function(a){a.get("name")===b&&(c=a)}),c},getFormParam:function(a,b){var c=this.getFormField(a,b);return c?c.get("value"):null},getEnableSearchAssist:function(){var a=document.cookie.match(/(?:^|\s*;\s*)SP=(?:[^&]*&)?a=(\d)(?:&|;)?/);return!a||"0"!==a[1]},truncate:function(b,c,d){var e,f;if(b=a.Lang.trim(b),c<=0||b.length<=c)return b;for(d=d?d.split(/\s+/):[],e=0;e<d.length;++e)if(f=d[e],f.length>3&&(b=b.replace(new RegExp("(?:^|\\s+)"+f+"(?:\\s+)?","gi"),"..."),b.length<=c))return b;return a.Lang.trim(b.substr(0,c-3)).replace(/\.+$/,"")+"..."},buildSearchUrl:function(b,c,d,e){var f=b.get("form"),g=d||f.get("action"),h=g.indexOf("yhs"),i=f.all("input,select,textarea"),j=[],k=a.one("#yucs-meta").getAttribute("data-property");return e||(e={}),i.each(function(a){var d,f,g;if("input"===a.get("tagName").toLowerCase())switch(a.get("type")){case"button":case"image":case"reset":case"submit":return;case"checkbox":case"radio":if(!a.get("checked"))return;break;case"hidden":if(g=a.getAttribute("id"),h===-1&&("hspart"===g||"hsimp"===g||"yucs-hstype"===g))return}d=a.get("name"),d===b.get("name")?f=c:e[d]||(f=a.get("value"),"fr"===g&&"frontpage"===k&&(f=a.get("value")+"-s")),f&&j.push(encodeURIComponent(d)+"="+encodeURIComponent(f))}),a.each(e,function(a,b){j.push(encodeURIComponent(b)+"="+encodeURIComponent(a))}),g+(g.indexOf("?")===-1?"?":"&")+j.join("&")}},a.on("unload",function(){},window)},"1.0.0",{requires:["base-base","get","node-base","node-style","event-focus"]}),YUI.add("searchassist-gossip",function(a){function b(){b.superclass.constructor.apply(this,arguments)}var c=a.Search.Assist,d="node",e="scrollSize",f="scrollIndex",g="children",h=!0,i="sa-item",j="sa-gossip",k="sa-spayt",l="sa-scroll-up",m="sa-scroll-down",n="sa-disabled",o="D(n)",p="D\\(n\\)",q="sa-alt-text";a.mix(b,{NAME:"searchassist-gossip",ATTRS:{maxLength:{value:0},descText:{value:"Search suggestions"},scrollSize:{value:5},scrollIndex:{readOnly:h,value:-1},scrollUpText:{value:"Scroll suggestions up"},scrollDownText:{value:"Scroll suggestions down"},linkTitle:{},linkTarget:{},linkStem:{},linkParams:{},styleList:[{}],listClasses:{value:[i]}}}),a.extend(b,c.TrayPanel,{initializer:function(){var b=this.get(d);b.addClass(j),this._buttonUp=a.Node.create('<a href="#" class="'+l+'" title="'+this.get("scrollUpText")+'" tabindex="-1"></a>'),this._buttonUp.on("click",this._handleButtonUpClick,this),b.append(this._buttonUp),this._buttonDown=a.Node.create('<a href="#" class="'+m+'" title="'+this.get("scrollDownText")+'" tabindex="-1"></a>'),this._buttonDown.on("click",this._handleButtonDownClick,this),b.append(this._buttonDown),this.on("activeIndexChange",this._handleActiveIndexChange,this),this.after(f+"Change",this._afterScrollIndexChange,this)},scrollUp:function(){if(this._list){var a,b=this.get(f)-1;b<0||(a=this._list.get(g),a.item(b+this.get(e)).addClass(o),a.item(b).removeClass(p),this._set(f,b))}},scrollDown:function(){if(this._list){var a=this.get(f),b=a+this.get(e),c=this._list.get(g);b>=c.size()||(c.item(a).addClass(o),c.item(b).removeClass(p),this._set(f,a+1))}},hasSuggestions:function(){return this.hasFocusableDescendants()},_defRefreshFn:function(b){function g(b,d){var f,g,h,j,m,n="http://finance.yahoo.com/q?s=",p=null,q=null,u=null,v='<li pos="'+(d+1)+'"';p=['<span class="symbol W(1/5) D(ib) Zoom Lts(n) Tren(a) Va(t) Ell">',a.Search.Highlighter.subwordMatch(l,c.Util.truncate(b[0],this.get("maxLength"),l)),"</span> "],q=['<span class="name W(1/2) D(ib) Zoom Lts(n) Tren(a) Va(t) Ell Pos(a) Start(0) Fw(n)" style="padding-left: 20%">',a.Search.Highlighter.subwordMatch(l,c.Util.truncate(b[1],this.get("maxLength"),l)),"</span> "],u=['<span class="exch_type_wrapper W(7/24) D(ib) Zoom Lts(n) Tren(a) Va(t) End(0) Pos(a) Fw(n) Dimmed Ell Ta(end)">',b[2],"</span>"],g=b[0]+b[1]+b[2],f=b[3],h=a.Search.Highlighter.subwordMatch(l,c.Util.truncate(g,this.get("maxLength"),l)),j=this.get("listClasses"),1===f&&(j.push(k),h+="?"),d>=this.get(e)&&j.push(o),j.length>0&&(v+=' class="'+j.join(" ")+'"'),m=c.Util.buildSearchUrl(i,n+b[0]+"&ql=0",this.get("linkStem"),this.get("uhbParams")),m=m.replace("ush1-finance_uh3_02",a.one("#yucs-satray").getAttribute("data-searchNews")),m+="&s="+b[0],v+='><a class="Pos(r) Pt(2px)" href="'+m+'" text="'+b[0]+',"',r&&(v+=' title="'+r.replace("#{q}",g).replace(/\"/g,"&quot;")+'"'),s&&(v+=' target="'+s+'"'),v+=">"+p.join("")+q.join("")+u.join(""),NaN,t+=v}function h(b,d){var f='<li pos="'+(d+1)+'"',g=b[0],h=b[1],j=a.Search.Highlighter.subwordMatch(l,c.Util.truncate(g,this.get("maxLength"),l)),m=this.get("listClasses");1===h&&(m.push(k),j+="?"),d>=this.get(e)&&m.push(o),m.length>0&&(f+=' class="'+m.join(" ")+'"'),f+='><a href="'+c.Util.buildSearchUrl(i,g,this.get("linkStem"),this.get("linkParams"))+'" text="'+g.replace(/\"/g,"&quot;")+'"',r&&(f+=' title="'+r.replace("#{q}",g).replace(/\"/g,"&quot;")+'"'),s&&(f+=' target="'+s+'"'),f+=">"+j+"</a></li>",t+=f}var i=this.get("tray").get("assist").get("searchbox"),j=this.get(d),l=b.query,m=b.data,n=b.altText,r=this.get("linkTitle"),s=this.get("linkTarget"),t="<ul>",u=a.one("#uhb"),v="",w=a.one("#yucs-satray"),x=w.getAttribute("data-vsearchAll"),y="";x=x?x.substring(1):"",u=u&&u.get("value")||"";var z="http://finance.yahoo.com/lookup"+x+"?uhb="+u+"&fr="+w.getAttribute("data-vfr")+"&s=";if(this._list&&(this._list.remove(),this._list=null),this._altText&&(this._altText.remove(),this._altText=null),m&&m.length>this.get(e)?(this._buttonUp.removeClass(p),this._buttonDown.removeClass(p)):(this._buttonUp.addClass(o),this._buttonDown.addClass(o)),""===l||!m.length)return void(n?(this._altText=a.Node.create('<p class="'+q+'">'+n+"</p>"),j.append(this._altText),this.show()):this.hide());this.show();var A,B=a.one("#yucs-meta"),C=B.getAttribute("data-property"),D=B.getAttribute("data-languagetag");A="finance"===C&&"zh-hant-hk"!==D?g:h,a.each(m,a.bind(A,this)),"finance"===C&&"zh-hant-hk"!=D&&(y=l.lastIndexOf(","),y!==-1&&(l=l.substring(y+1)),v='<li><a id ="searchAll" text=" " class="financeLookup Mx(6px) Pos(r) Fw(b) Mt(8px)"style="color: #039;" href="'+z+encodeURIComponent(l)+'">Show all results for '+a.Escape.html(l)+"</a></li>",t+=v),t+="</ul>",this._list=a.Node.create(t),this._applyStyles(this._list),j.one(">p").insert(this._list,"after"),this._set(f,0),this._initDescendants()},_applyStyles:function(a){var b,c,d=this.get("styleList");if(d)for(var e=d.length;e>0;e--)b=d[e-1],c="this"===b.selector?a:a.all(b.selector),c&&c.addClass(b.classes)},_handleActiveIndexChange:function(a){if(this._list){var b=a.newVal;if(b<this.get(f))for(;b<this.get(f);)this.scrollUp();else for(;b>=this.get(f)+this.get(e);)this.scrollDown()}},_afterScrollIndexChange:function(a){var b=this._list.get(g);this._buttonUp.removeClass(n),this._buttonDown.removeClass(n),a.newVal<=0?this._buttonUp.addClass(n):a.newVal>=b.size()-this.get(e)&&this._buttonDown.addClass(n)},_handleButtonUpClick:function(a){a.halt(),this.scrollUp()},_handleButtonDownClick:function(a){a.halt(),this.scrollDown()}}),c.Gossip=b},"1.0.0",{requires:["searchassist-core","highlighter","escape"]}),YUI.add("gossip-aria-plugin",function(a){function b(){b.superclass.constructor.apply(this,arguments)}a.mix(b,{NAME:"gossip-aria-plugin",NS:"aria",ATTRS:{suggestions_available:{value:"Search suggestions are available, use the up and down arrow keys to review them."},no_suggestion_available:{value:"No suggestion is available."}}}),a.extend(b,a.Plugin.Base,{initializer:function(){this._liveRegion=a.Node.create('<div role="status" aria-live="polite"></div>');var b=this._liveRegion;a.one("body").append(b),b.setStyles({position:"absolute",left:"-9999px"}),this.doAfter("refresh",this._handleRefresh,this)},_updateLiveRegion:function(b){var c=a.Node.create("<p></p>");c.setContent(b),this._liveRegion.all("*").remove(),this._liveRegion.append(c)},_handleRefresh:function(){var a=this.get("host").get("descendants").size()>0?this.get("suggestions_available"):this.get("no_suggestion_available");this._updateLiveRegion(a)}}),a.Search.Assist.GossipAriaPlugin=b},"1.0.0",{requires:["searchassist-core","plugin","base-pluginhost"]}),YUI.add("srp-preload-plugin",function(a){function b(){b.superclass.constructor.apply(this,arguments)}a.mix(b,{NAME:"srp-preload-plugin",NS:"preload",ATTRS:{url:{value:"http://search.yahoo.com/resources?js=1"}}}),a.extend(b,a.Plugin.Base,{initializer:function(b){var c=b.host.get("searchbox").on("keydown",function(){a.Get.script(this.get("url")),c.detach()},this)}}),a.Search.Assist.SrpPreloadPlugin=b},"1.0.0",{requires:["searchassist-core","plugin","base-pluginhost"]}),YUI.add("miniassist",function(a){function b(){b.superclass.constructor.apply(this,arguments)}var c=a.Search,d=c.Assist,e="node",f="parentNode",g="searchbox",h="value",i="hasFocus",j="activeIndex",k="descendants",l="spaceid",m="logdata",n="action",o=!0,p=!1,q="Change",r="sa-settings",s="sa-spayt",t=0;a.mix(b,{NAME:"miniassist",ATTRS:{searchbox:{initOnly:o,setter:function(b){return a.one(b)}},node:{initOnly:o,setter:function(b){return a.one(b)}},url:{value:"http://sugg.us.search.yahoo.net/gossip-us-sayt/"},nresults:{value:10},settingsText:{value:"Settings"},settingsUrl:{value:"http://search.yahoo.com/preferences/preferences?page=search_assist"},spaceid:{value:"2142478948"},origin:{},logdata:{},pubid:{},align:{value:p},shim:{value:0},preloadsrp:{value:p},iswebsearch:{value:p}}}),a.extend(b,a.AssistBase,{initializer:function(){this._initComponents.apply(this,arguments),this._attachEvents()},_initComponents:function(b){var f=this.getEnableSearchAssist(),h=function(b,c,d){return a.mix(b,c||{},d,null,0,!0)};this.assist=new c.Assist(h({searchbox:this.get(g),autoSuggest:f},b.assist)),this.source=new d.DataSource(h({globalCallback:"yasearch",generateRequestURI:a.bind(this._generateRequestURI,this)},b.source,!0)),window.fxsearch=function(b){var c;b.Result?(c={q:b[0],f:["k","m"],r:[]},a.each(b.Result,function(a){var b=[],d="";b[0]=a.symbol,b[1]=a.name,a.typeDisp&&(d=a.typeDisp+"-"),d+=a.exchDisp?a.exchDisp:a.exch,b[2]=d,b[3]=0,c.r.push(b)})):(c={q:b[0],f:["k","m"],r:[]},a.each(b[1],function(a){c.r.push([a,0])})),window.yasearch(c)},YAHOO.util.UHScriptNodeDataSource.callbacks=function(a){window.fxsearch(a.ResultSet)},this.tray=new d.Tray(h({assist:this.assist,node:this.get(e)},b.tray)),this.get("align")&&this.tray.plug(d.TrayAlignPlugin),(2===this.get("shim")||1===this.get("shim")&&a.UA.ie<=6)&&this.tray.plug(d.TrayShimPlugin),this.gossip=new d.Gossip(h({tray:this.tray,delegate:o,linkParams:{fr2:"sa-gp"}},b.gossip)),this.gossip.plug(d.GossipAriaPlugin,b.aria||{}),this.tray.get(e).append(a.Node.create('<a href="'+this.get("settingsUrl")+'" class="'+r+' D(n)">'+this.get("settingsText")+"</a>")),this.get("preloadsrp")&&this.plug(d.SrpPreloadPlugin,b.preload||{})},_attachEvents:function(){function b(){var a=d.gossip.get(k).item(d.gossip.get(j)),b=f.get(h),c=-1,e="finance"===m&&"zh-hant-hk"!==n&&b.match(/,/g)||[],g=a.getAttribute("text");1===e.length?g=a.getAttribute("text"):2===e.length?c=b.indexOf(","):(b=b.substring(0,b.length-1),c=b.lastIndexOf(",")),c!==-1&&("finance"!==m?g=a.getAttribute("text"):(this.pqstr=b.substring(c+1),g="",g=b.replace(new RegExp(RegExp.escape(this.pqstr)+"$"),a.getAttribute("text")))),f.set(h,g)}function c(){this._invalidTrayContent=!0}var d=this,f=this.get(g),l=a.one("#yucs-meta"),m=l.getAttribute("data-property"),n=l.getAttribute("data-languagetag");RegExp.escape=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},this.assist.on("suggest",function(b){b.query.length<this.assist.get("minLength")?this.gossip.refresh(""):this.source.request(b.query,a.bind(this._handleGossipResponse,this))},this),f.on("keydown",function(c){switch(c.keyCode){case 27:c.halt(),this.gossip.hide();break;case 40:if(c.halt(),this.assist.get("autoSuggest"))if(this._invalidTrayContent)this.source.request(f.get(h),a.bind(function(a){this._invalidTrayContent=!1,this._handleGossipResponse(a),this.gossip.focus(),this.pqstr=f.get(h),b()},this));else if(this.gossip.hasSuggestions()&&(this.gossip.show(),!this.gossip.get(i)))if(this.gossip.focus(),"finance"===m&&"zh-hant-hk"!=n){var e=f.get(h),g=e.lastIndexOf(","),l=d.gossip.get(k).item(d.gossip.get(j)),o="";g!==-1?(this.pqstr=e.substring(g+1),o=e.replace(this.pqstr,l.getAttribute("text"))):o=l.getAttribute("text"),f.set(h,o)}else this.pqstr=f.get(h),b.call(this)}},this),this.gossip.on("keynav",function(a){(27===a.keyCode||38===a.keyCode&&0===this.gossip.get(j))&&(this.gossip.blur(),this.pqstr=this.pqstr?this.pqstr:"",f.set(h,this.pqstr))},this),this.gossip.after(j+q,function(a){this.gossip.get(i)&&b()},this),this.gossip.on("show",function(){this.tray.open()},this),this.gossip.on("hide",function(){this.tray.close()},this),a.one(document).on("mousedown",function(a){var b=a.target,c=this.get(g);!this.tray.get(e).contains(b)&&b!==c&&("INPUT"!==b.get("tagName")&&"BUTTON"!==b.get("tagName")||"submit"!==b.get("type")&&b.get("form")!==c.get("form"))&&this.gossip.hide()},this),this.gossip.on(i+q,function(a){this.assist.set("enabled",!a.newVal)},this),this.gossip.get(e).on("click",this._handleGossipClick,this),this.get(g).get("form").on("submit",this._handleSearchFormSubmit,this),this.gossip.after("refresh",function(){var a=this.gossip.get(e).one("."+s);t=a?3:2===t||3===t?2:1},this),this.on("url"+q,c,this),this.on("pubid"+q,c,this)},_generateRequestURI:function(b,c){var d,e,f,g,h=a.one("#yucs-meta"),i=h.getAttribute("data-property"),j=h.getAttribute("data-languagetag");return"finance"===i&&"zh-hant-hk"!==j&&(d=c.lastIndexOf(","),d!==-1&&(c=c.substring(d+1))),f=this.get("url").split("?"),e=f[0]+"?output=yjsonp&l=1&command="+encodeURIComponent(c)+"&nresults="+this.get("nresults")+(f.length>1?"&"+f[1]:""),g=this.get("pubid"),"666"===g?e=this.get("url")+"?query="+encodeURIComponent(c)+"&region=US&lang=en-US&callback=YAHOO.util.UHScriptNodeDataSource.callbacks":(g&&(e+="&pubid="+g),e)},_handleGossipResponse:function(a){a.query===this.packString(this.get(g).get(h))&&(this._gprid=a.data.i,this.gossip.refresh(a.query,a.data.r))},_handleGossipClick:function(b){var d=b.target,e=this.get(g).get("form"),h=function(){for(;d&&"A"!==d.get("tagName").toUpperCase();)d=d.get(f);return d}(),i=h.get(f),j=h.get("href"),n=this.get("origin"),o={fr:this.getFormParam(e,"fr"),fr2:"sa-gp",origin:n?n:location.hostname,query:h.getAttribute("text"),pqstr:this.pqstr||"",gprid:this._gprid||"",n_gps:this.gossip.get(k).size(),pos:i.getAttribute("pos"),sac:i.hasClass(s)?2:1,sao:t};a.mix(o,this.get(m)),o[c.ULT.SRC_SPACEID_KEY]=this.get(l),j=c.ULT.track_click(j,o),h.set("href",j)},_handleSearchFormSubmit:function(b){var d,e,o=b.target,p=this.get("origin"),q={fr:this.getFormParam(o,"fr"),origin:p?p:location.hostname,query:this.get(g).get(h),n_gps:this.gossip.get(k).size(),sao:t};this.gossip.get(i)&&!this.get("iswebsearch")&&(d=this.gossip.get(k).item(this.gossip.get(j)),e=d.get(f),a.mix(q,{fr2:"sa-gp",pqstr:this.pqstr||"",gprid:this._gprid||"",pos:e.getAttribute("pos"),sac:e.hasClass(s)?2:1}),a.each(this.gossip.get("linkParams"),a.bind(function(b,c){var d=this.getFormField(o,c);d?d.set(h,b):o.append(a.Node.create('<input type="hidden" name="'+c+'" value="'+b+'">'))},this))),a.mix(q,this.get(m)),q[c.ULT.SRC_SPACEID_KEY]=this.get(l),o.set(n,c.ULT.track_click(o.get(n),q))}}),a.mix(b,d.Util,!0,null,4),c.MiniAssist=b},"1.0.0",{requires:["searchassist-gossip","gossip-aria-plugin","ult-linktrack"],use:["tray-align-plugin","tray-shim-plugin"]});